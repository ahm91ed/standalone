"use strict";(self.webpackChunkstandalone=self.webpackChunkstandalone||[]).push([[64],{64:(C,c,i)=>{i.r(c),i.d(c,{ForgotpasswordComponent:()=>x});var p=i(6814),n=i(95),t=i(4769),m=i(9862);let l=(()=>{class o{constructor(e){this._HttpClient=e,this.baseUrl="https://ecommerce.routemisr.com/api/v1/auth/"}forgotPassword(e){return this._HttpClient.post(this.baseUrl+"forgotPasswords",e)}verifyResetCode(e){return this._HttpClient.post(this.baseUrl+"verifyResetCode",e)}resetPassword(e){return this._HttpClient.put(this.baseUrl+"resetPassword",e)}static#t=this.\u0275fac=function(s){return new(s||o)(t.LFG(m.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var u=i(1120);function d(o,a){if(1&o&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.userMsg)}}function g(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"section",2)(1,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.handleForgotPassword(r.forgotForm))}),t.TgZ(2,"div"),t._UZ(3,"label",4)(4,"input",5),t.YNc(5,d,2,1,"p",6),t.qZA(),t.TgZ(6,"button",7),t._uU(7,"forgot password"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.forgotForm),t.xp6(4),t.Q6J("ngIf",e.userMsg)}}function f(o,a){if(1&o&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.userMsg)}}function w(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"section",2)(1,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.handleverifyCode(r.verifyCodeForm))}),t.TgZ(2,"div"),t.YNc(3,f,2,1,"p",9),t._UZ(4,"label",10)(5,"input",11),t.qZA(),t.TgZ(6,"button",7),t._uU(7,"Reset Code"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.verifyCodeForm),t.xp6(2),t.Q6J("ngIf",e.userMsg)}}function h(o,a){if(1&o&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.userMsg)}}function _(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"section",2)(1,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.handleResetPassword())}),t.TgZ(2,"div"),t.YNc(3,h,2,1,"p",9),t._UZ(4,"label",13)(5,"input",14),t.qZA(),t.TgZ(6,"button",7),t._uU(7,"submit"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.resetPasswordForm),t.xp6(2),t.Q6J("ngIf",e.userMsg)}}let x=(()=>{class o{constructor(e,s){this._UserpasswordService=e,this._Router=s,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.userMsg="",this.forgotForm=new n.cw({email:new n.NI("")}),this.verifyCodeForm=new n.cw({resetCode:new n.NI("")}),this.resetPasswordForm=new n.cw({newPassword:new n.NI("")})}handleForgotPassword(e){this.email=this.forgotForm.value.email,this._UserpasswordService.forgotPassword(e.value).subscribe({next:r=>{console.log(r),this.userMsg=r.message,this.step1=!1,this.step2=!0},error:r=>{this.userMsg=r.error.message}})}handleverifyCode(e){this._UserpasswordService.verifyResetCode(e.value).subscribe({next:s=>{console.log(s),this.userMsg=s.status,this.step2=!1,this.step3=!0},error:s=>{this.userMsg=s.error.message}})}handleResetPassword(){let e=this.resetPasswordForm.value;e.email=this.email,this._UserpasswordService.resetPassword(e).subscribe({next:s=>{console.log(s),s.token&&(localStorage.setItem("eToken ",s.token),this._Router.navigate(["home"]))},error:s=>{this.userMsg=s.error.message}})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(l),t.Y36(u.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-forgotpassword"]],standalone:!0,features:[t.jDz],decls:4,vars:3,consts:[[1,"w-75","mx-auto","bg-light"],["class","w-75 mx-auto p-4 mt-4 ",4,"ngIf"],[1,"w-75","mx-auto","p-4","mt-4"],[3,"formGroup","ngSubmit"],["for","email"],["id","email","type","email","formControlName","email","placeholder","enter your E-mail",1,"form-control"],["class","mt-3 text-danger",4,"ngIf"],[1,"btn","btn-outline-success","mt-4"],[1,"mt-3","text-danger"],["class","mb-3 text-danger",4,"ngIf"],["for","resetCode"],["id","resetCode","type","text","formControlName","resetCode","placeholder","enter your code",1,"form-control"],[1,"mb-3","text-danger"],["for","password"],["id","password","type","password","formControlName","email","placeholder","enter your new password",1,"form-control"]],template:function(s,r){1&s&&(t.TgZ(0,"section",0),t.YNc(1,g,8,2,"section",1),t.YNc(2,w,8,2,"section",1),t.YNc(3,_,8,2,"section",1),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngIf",r.step1),t.xp6(1),t.Q6J("ngIf",r.step2),t.xp6(1),t.Q6J("ngIf",r.step3))},dependencies:[p.ez,p.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return o})()}}]);