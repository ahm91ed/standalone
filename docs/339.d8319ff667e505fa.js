"use strict";(self.webpackChunkstandalone=self.webpackChunkstandalone||[]).push([[339],{6339:(f,h,c)=>{c.r(h),c.d(h,{WishlistComponent:()=>E});var _=c(6814),u=c(1120),p=c(1578),t=c(4769),a=c(916),m=c(2425),r=c(9366);function n(e,l){if(1&e&&t._UZ(0,"i",19),2&e){const i=l.$implicit,s=t.oxw().$implicit;t.ekj("text-warning",s.ratingsAverage>=i)}}function g(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"i",20),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.addToWishlist(o._id))}),t.qZA()}}function v(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"i",21),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit,d=t.oxw(2);return t.KtG(d.removeFromWishlist(o._id))}),t.qZA()}}const x=function(e){return["/details",e]},C=function(){return[1,2,3,4,5]};function T(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"figure"),t._UZ(4,"img",7),t.qZA(),t.TgZ(5,"figcaption",8)(6,"h3",9),t._uU(7),t.qZA(),t.TgZ(8,"h3",10),t._uU(9),t.ALo(10,"cuttext"),t.qZA()(),t._UZ(11,"hr"),t.TgZ(12,"div",11)(13,"span",12),t._uU(14),t.qZA(),t.TgZ(15,"span"),t.YNc(16,n,1,2,"i",13),t.qZA()()(),t.TgZ(17,"div",14)(18,"i",15),t.NdJ("click",function(){const d=t.CHM(i).$implicit,D=t.oxw(2);return t.KtG(D.addToCart(d._id))}),t.qZA(),t.YNc(19,g,1,0,"i",16),t.YNc(20,v,1,0,"i",17),t._UZ(21,"i",18),t.qZA()()()}if(2&e){const i=l.$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("routerLink",t.VKq(12,x,i._id)),t.xp6(2),t.Q6J("src",i.imageCover,t.LSH)("alt",i.title),t.xp6(3),t.Oqu(i.category.name),t.xp6(2),t.Oqu(t.xi3(10,9,i.title,2)),t.xp6(5),t.hij("",i.price," EGP "),t.xp6(2),t.Q6J("ngForOf",t.DdM(14,C)),t.xp6(3),t.Q6J("ngIf",!s.wishlistData.includes(i._id)),t.xp6(1),t.Q6J("ngIf",s.wishlistData.includes(i._id))}}function W(e,l){if(1&e&&(t.TgZ(0,"section",1)(1,"div",2),t.YNc(2,T,22,15,"div",3),t.qZA()()),2&e){const i=t.oxw();t.xp6(2),t.Q6J("ngForOf",i.products)}}let E=(()=>{class e{constructor(i,s,o){this._WishlistService=i,this._ToastrService=s,this._CartService=o,this.products=[],this.wishlistData=[]}ngOnInit(){this._WishlistService.getWishlist().subscribe({next:i=>{console.log(i),this.products=i.data;const s=i.data.map(o=>o._id);this.wishlistData=s}})}addToCart(i){this._CartService.addProductCart(i).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message,s.status),this._CartService.cartNumber.next(s.numOfCartItems)}})}addToWishlist(i){this._WishlistService.addWishlist(i).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message,s.status),this.wishlistData=s.data}})}removeFromWishlist(i){this._WishlistService.removeWishlist(i).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.status,s.message),this.wishlistData=s.data,this._WishlistService.getWishlist().subscribe({next:o=>{this.products=o.data}})}})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(a.M),t.Y36(m._W),t.Y36(r.N))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-wishlist"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class"," p-4 mt-4 rounded-2 ",4,"ngIf"],[1,"p-4","mt-4","rounded-2"],[1,"row","g-4"],["class","col-md-6 col-lg-3 h-100",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-3","h-100"],[1,"product","position-relative"],[1,"main-layer",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"p-2"],[1,"h6","fw-bold","text-primary"],[1,"h6","fw-bold"],[1,"product-tail","d-flex","justify-content-between","align-items-center","p-2"],[1,"fw-bold","text-muted"],["class","fas fa-star fa-sm",3,"text-warning",4,"ngFor","ngForOf"],[1,"layer-product","d-flex","flex-column","justify-content-evenly","align-items-center","rounded-2"],["title","add to cart",1,"fa-solid","fa-cart-shopping","text-secondary","fa-xl",3,"click"],["class","fa-regular fa-heart text-danger fa-xl","title","add to wishlist ",3,"click",4,"ngIf"],["class","fa-solid fa-heart text-danger fa-xl","title","remove from wishlist ",3,"click",4,"ngIf"],["title","quick view",1,"fa-solid","fa-eye","color-main","fa-xl"],[1,"fas","fa-star","fa-sm"],["title","add to wishlist ",1,"fa-regular","fa-heart","text-danger","fa-xl",3,"click"],["title","remove from wishlist ",1,"fa-solid","fa-heart","text-danger","fa-xl",3,"click"]],template:function(s,o){1&s&&t.YNc(0,W,3,1,"section",0),2&s&&t.Q6J("ngIf",o.products.length>0)},dependencies:[_.ez,_.sg,_.O5,u.rH,p.r]})}return e})()},9366:(f,h,c)=>{c.d(h,{N:()=>t});var _=c(5619),u=c(4769),p=c(9862);let t=(()=>{class a{constructor(r){this._HttpClient=r,this.cartNumber=new _.X(0),this.apiUrl="https://ecommerce.routemisr.com/api/v1/"}addProductCart(r){return this._HttpClient.post(this.apiUrl+"cart",{productId:r})}getUserCart(){return this._HttpClient.get(this.apiUrl+"cart")}removeSpecificCartItem(r){return this._HttpClient.delete(this.apiUrl+`cart/${r}`)}updateCartProduct(r,n){return this._HttpClient.put(this.apiUrl+`cart/${n}`,{count:r})}clearUserCart(){return this._HttpClient.delete(this.apiUrl+"cart")}checkoutSession(r,n){return this._HttpClient.post(this.apiUrl+`orders/checkout-session/${r}?url=http://localhost:4200`,n)}static#t=this.\u0275fac=function(n){return new(n||a)(u.LFG(p.eN))};static#i=this.\u0275prov=u.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);